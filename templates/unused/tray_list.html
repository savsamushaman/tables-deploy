{% extends 'pages/base.html' %}
{% load static %}
{% block title %} Tray {% endblock title %}

{% block contet %}
    <h3>Order</h3>
    {% if items %}
        <ul>
            {% for item in items %}
                <li id="{{ item.product.id }}">
                    <button data-productid="{{ item.product.id }}" data-action="remove" data-price="{{ item.price }}"
                            class="update_button">
                        {{ item.quantity }}
                    </button>
                    {{ item.product }} <a
                        href="{% url 'tray:remove_item' item.product.id %}">Remove
                    from order</a>
                    <button data-productid="{{ item.product.id }}" data-action="add" class="update_button">
                        {{ item.quantity }}
                    </button>
                </li>
            {% endfor %}
        </ul>
        <p>Order total : {{ total }}</p>
        <p>Order status : {{ order_status }}</p>

        <a href="{% url 'tray:place_order' %}">
            <button>Place order</button>
        </a>

        <a href="{% url 'tray:cancel_order' clear=1 %}">
            <button>Clear Tray</button>
        </a>
    {% else %}
        <p>Your tray is empty mate</p>

    {% endif %}
    <br>

    {% if active %}
        <p>Active</p>
        {% for ord in active %}
            <p>Order > {{ ord }}</p>
            {% if ord.status == "PL" %}
                <p>Status > Placed</p>
            {% elif ord.status == "S" %}
                <p>Status > On the way ! / Delivered</p>
            {% endif %}
            <br>
            <hr>
        {% endfor %}
    {% else %}
        <p>No active orders</p>
    {% endif %}

{% endblock contet %}

{% block script %}
    <script src="{% static 'js/listener_to_buttons.js' %}"></script>
{% endblock script %}